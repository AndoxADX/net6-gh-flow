{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "metadata": {
      "template": "./deploy.bicep"
    },
    "parameters": {
      "location": {
        "value": "southeastasia"
      },
      "env": {
        "value": "dev"
      },
      "deployment": {
        "value": {
          "projectName": "Nov3-demo",
          "resourceGroupName": "bicep-rg",
          "MIInfo": [],
          "publicIp": [],
          "b2c": {},
          "ips": ["60.50.26.28"],
          "staticWebsite": [],
          "vnet": [],
          "certPassword": {},
          "planInfo": [
            {
              "name": "Nov3-users"
            }
          ],
          "cosmosDb": {
            "name": "Nov3-db", 
            "keyvaultName": "Nov3-db",
            "dbName": "db_Nov3",
            "containers": [
              {
                "name": "geoData",
                "partitionKey": "partitionKey"
              },
              {
                "name": "contractData",
                "partitionKey": "partitionKey"
              }
            ]
          },
          "webapp":{
            "appName": "nov3-demo-web",
            "skuName": "F1",
            "skuTier": "Free",
            "staticSiteslocation": "eastasia"
          },
          "vnet": [
            {
              "name": "newbhi",
              "vnetAddressPrefixes": [
                "10.170.192.0/18"
              ],
              "networkSecurityGroup": "nsg-{{locationCode}}-{{env}}-weballow-001",
              "subnets": [
                {
                  "name": "agw",
                  "ipAddressRange": "10.170.192.0/24",
                  "PrivateEndpointNetworkPolicies": "Disabled",
                  "privateLinkServiceNetworkPolicies": "Enabled",
                  "serviceEndpoints": [
                    {
                      "service": "Microsoft.Storage",
                      "locations": [
                        "australiaeast",
                        "australiasoutheast"
                      ]
                    }
                  ],
                  "delegations": []
                },
                {
                  "name": "apim",
                  "ipAddressRange": "10.170.193.0/24",
                  "PrivateEndpointNetworkPolicies": "Disabled",
                  "privateLinkServiceNetworkPolicies": "Enabled",
                  "serviceEndpoints": [],
                  "delegations": []
                },
                {
                  "name": "functions",
                  "ipAddressRange": "10.170.194.0/24",
                  "PrivateEndpointNetworkPolicies": "Disabled",
                  "privateLinkServiceNetworkPolicies": "Enabled",
                  "serviceEndpoints": [],
                  "delegations": [
                    {
                      "name": "Microsoft.Web.serverFarms",
                      "properties": {
                        "serviceName": "Microsoft.Web/serverFarms"
                      },
                      "type": "Microsoft.Network/virtualNetworks/subnets/delegations"
                    }
                    
                  ]
                }
              ]
            }
          ]
        }
      }
    }
  }